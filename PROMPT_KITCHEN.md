# The Prompt Kitchen ğŸ‘¨â€ğŸ³

## A Narrative-Driven DSPy Demo

Instead of abstract "variants" and "optimization," we tell a story with characters, emotions, and competition!

## The Story

**You are the Head Chef** at a busy restaurant (DSPy). A customer order comes in (user input), and you have **three assistant chefs** who each interpret your recipe differently:

- ğŸ‘¨â€ğŸ³ **Chef Formal** - Precise & Traditional (v1)
- ğŸ‘©â€ğŸ³ **Chef Friendly** - Warm & Conversational (v2)
- ğŸ§‘â€ğŸ³ **Chef Analyst** - Thoughtful & Detailed (v3)

**The Judges** (scoring functions) taste each dish and award points based on:
- ğŸ¯ Correct Category
- ğŸ§  Intent Match
- ğŸ“ Perfect Length
- ğŸ’ª Confidence
- âœ¨ Presentation

The chef with the highest score wins the **ğŸ† Golden Spoon!**

## Why This Works

### Before (Technical)
- "DSPy generates 3 prompt variants"
- "Scoring functions evaluate outputs"
- "Argmax selects winner"
- **Result:** ğŸ¤” "That's... abstract?"

### After (Narrative)
- "3 chefs cook your order"
- "Judges taste and score each dish"
- "Winner gets the golden spoon"
- **Result:** ğŸ˜Š "Oh! It's a competition!"

## Visual Design

### Color Palette
- **Kitchen Warm**: Orange (#F97316), Yellow (#EAB308), Red (#EF4444)
- **Chef Blue**: Blue (#3B82F6) for Chef Formal
- **Chef Purple**: Purple (#A855F7) for Chef Friendly
- **Chef Orange**: Orange (#F97316) for Chef Analyst
- **Winner Gold**: Yellow (#FBBF24), Orange (#F59E0B)

### Character Design
Each chef has:
- **Unique Avatar**: ğŸ‘¨â€ğŸ³ ğŸ‘©â€ğŸ³ ğŸ§‘â€ğŸ³
- **Personality**: One-word descriptor
- **Description**: Their cooking style
- **Color Theme**: Used throughout their card

### Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨â€ğŸ³ The Prompt Kitchen                    [Show/Hide Story] â”‚
â”‚ Watch 3 AI Chefs compete to cook the perfect response!    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“– The Story (collapsible)                                 â”‚
â”‚ [1. You Give Order] [2. Chefs Cook] [3. Judges Score]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Your Order    â”‚ ğŸ‘¨â€ğŸ³ Chefs at Work                        â”‚
â”‚                  â”‚                                         â”‚
â”‚ [Text box]       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                  â”‚ â”‚ ğŸ‘¨â€ğŸ³ Chef Formal         â­â­â­â­â­ 4.8 â”‚ â”‚
â”‚ [Send to        â”‚ â”‚ Precise & Traditional                â”‚ â”‚
â”‚  Kitchen!]       â”‚ â”‚ ğŸ“– Chef's Recipe [Show/Hide]         â”‚ â”‚
â”‚                  â”‚ â”‚ ğŸ½ï¸ The Finished Dish                 â”‚ â”‚
â”‚ ğŸ”¥ Popular       â”‚ â”‚    ğŸ“ urgent                         â”‚ â”‚
â”‚ Orders:          â”‚ â”‚    "Customer locked out..."          â”‚ â”‚
â”‚ â€¢ Double charge  â”‚ â”‚ âš–ï¸ Judge's Scorecard                 â”‚ â”‚
â”‚ â€¢ App crash      â”‚ â”‚    ğŸ¯ Correct Category    âœ“          â”‚ â”‚
â”‚ â€¢ Cancel         â”‚ â”‚    ğŸ§  Intent Match        âœ“          â”‚ â”‚
â”‚ â€¢ Urgent         â”‚ â”‚    ğŸ“ Perfect Length      âœ“          â”‚ â”‚
â”‚                  â”‚ â”‚    ğŸ’ª Confidence          âœ“          â”‚ â”‚
â”‚ âš–ï¸ Judge's       â”‚ â”‚    âœ¨ Presentation        âœ“          â”‚ â”‚
â”‚ Scorecard:       â”‚ â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 96%             â”‚ â”‚
â”‚ ğŸ¯ Category      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ ğŸ§  Intent        â”‚                                         â”‚
â”‚ ğŸ“ Length        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ ğŸ’ª Confidence    â”‚ â”‚ ğŸ‘©â€ğŸ³ Chef Friendly       â­â­â­â­â­ 5.0 â”‚ â”‚
â”‚ âœ¨ Presentation  â”‚ â”‚ Warm & Conversational    ğŸ† WINNER!  â”‚ â”‚
â”‚                  â”‚ â”‚ [Same structure...]                  â”‚ â”‚
â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                  â”‚                                         â”‚
â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                  â”‚ â”‚ ğŸ§‘â€ğŸ³ Chef Analyst        â­â­â­â­â˜† 4.2 â”‚ â”‚
â”‚                  â”‚ â”‚ Thoughtful & Detailed                â”‚ â”‚
â”‚                  â”‚ â”‚ [Same structure...]                  â”‚ â”‚
â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Animations

### Chef Entrance
- Cards slide in from left with spring animation
- Staggered delays (0.15s between each chef)
- Scale from 0.9 to 1.0 with bounce

### Cooking State
- Sparkles icon rotates continuously
- "Chef is cooking..." text pulses opacity
- Background has subtle shimmer

### Winner Announcement
- Golden trophy banner drops from top
- Trophy icon wobbles (-10Â°, +10Â°, -10Â°, 0Â°)
- Winner card gets yellow border with 8px ring
- Scale animation: 0.8 â†’ 1.1 â†’ 1.0 with spring

### Score Bar
- Fills from left to right over 0.8s
- Delay 0.3s after card appears
- Uses gradient matching chef color (or gold for winner)

## Interactive Elements

### Buttons
- **"Send to Kitchen!"** - Orange-to-red gradient, chef hat icon
- **"Cook Another Order"** - Green gradient when complete
- **"Show/Hide Story"** - White transparent in header
- **Popular Orders** - Orange background with border
- **Show Recipe** - Toggles with arrow indicator

### Hover States
- Buttons: Darken gradient, increase shadow
- Recipe cards: Slight opacity change
- Popular orders: Background lightens

### Click Feedback
- Button press: Scale 0.95 â†’ 1.0
- Recipe toggle: Smooth height animation
- Order selection: Fills text box with example

## Educational Value

### What Users Learn

**Through Metaphor:**
1. "I'm the head chef" â†’ I define the task
2. "Each chef has a style" â†’ Different prompt strategies
3. "Judges score the dishes" â†’ Objective evaluation criteria
4. "Best dish wins" â†’ Optimization through competition

**Concrete Takeaways:**
- âœ… DSPy tries multiple approaches automatically
- âœ… Each approach has strengths/weaknesses
- âœ… Scoring is objective and transparent
- âœ… The "winner" is data-driven, not random

### Emotional Connection

**Characters create investment:**
- "I wonder which chef will win?"
- "Ooh, Chef Friendly got perfect scores!"
- "Let's see what Chef Analyst does differently"

**Competition creates engagement:**
- Users root for their favorite chef
- Want to see who performs best
- Understand *why* one won over another

## Customization

### Change the Metaphor

Don't like cooking? Easy to swap:

**Racing Cars:**
- Chefs â†’ Racers
- Cooking â†’ Racing
- Dishes â†’ Lap Times
- Judges â†’ Checkpoints

**Music Battle:**
- Chefs â†’ Musicians
- Cooking â†’ Performing
- Dishes â†’ Songs
- Judges â†’ Critics

**Code:**
```tsx
const RACERS = {
  v1: { name: 'Speed Demon', avatar: 'ğŸï¸', color: 'red' },
  v2: { name: 'Smooth Operator', avatar: 'ğŸ', color: 'blue' },
  v3: { name: 'Tech Master', avatar: 'âš™ï¸', color: 'purple' }
};
```

### Add More Chefs

Edit `CHEFS` object in `PromptKitchen.tsx`:

```tsx
const CHEFS = {
  v1: { /* existing */ },
  v2: { /* existing */ },
  v3: { /* existing */ },
  v4: {
    name: 'Chef Creative',
    avatar: 'ğŸ‘¨â€ğŸ¨',
    color: 'pink',
    personality: 'Bold & Experimental',
    description: 'Tries wild new combinations'
  }
};
```

Update `backend/config.yaml`:
```yaml
variant_count: 4
```

### Customize Judge Criteria

Edit `JUDGE_CRITERIA` array:

```tsx
const JUDGE_CRITERIA = [
  { key: 'label_valid', name: 'Correct Category', icon: 'ğŸ¯' },
  { key: 'custom_metric', name: 'Your Metric', icon: 'ğŸ’' },
  // Add more...
];
```

## Performance

### Optimizations
- Chef cards use `React.memo` for re-render prevention
- Animations use `transform` and `opacity` (GPU-accelerated)
- Recipe text only renders when expanded
- Staggered animations prevent frame drops

### Loading States
- "Kitchen Ready!" placeholder before first run
- "Chef is cooking..." with pulsing animation
- No layout shift when content appears

## Accessibility

### Keyboard Navigation
- Tab through: Text box â†’ Send button â†’ Popular orders â†’ Recipe toggles
- Enter: Submit order
- Space: Toggle recipe visibility

### Screen Reader
- Chef avatars have aria-labels: "Chef Formal cooking"
- Scores announced: "Chef Friendly scored 5 out of 5 stars"
- Winner announced: "Winner crowned: Chef Friendly with golden spoon"

### Visual
- High contrast text (WCAG AA)
- Large touch targets (44px minimum)
- Clear focus indicators
- Color is not the only differentiator (icons + text)

## Migration from Old UI

### Quick Switch

**Use Prompt Kitchen (New):**
```tsx
import { PromptKitchen } from './components/PromptKitchen';
// ...
return <PromptKitchen {...props} />;
```

**Use SimpleDSPyDemo (Previous):**
```tsx
import { SimpleDSPyDemo } from './components/SimpleDSPyDemo';
// ...
return <SimpleDSPyDemo {...props} />;
```

**Use ModernApp (Original):**
```tsx
import { ModernApp } from './components/ModernApp';
// ...
return <ModernApp />;
```

All three work with the same backend!

## User Testing Insights

### What We Expect Users to Say

**Positive:**
- "Oh! It's like a cooking show!"
- "I want Chef Friendly to win!"
- "The judges explain why it won - I get it now"
- "This makes DSPy way easier to understand"

**Questions:**
- "Can I add my own chef?"
- "What if I want different judge criteria?"
- "Can I see the actual prompts?" (Yes - click "Show Recipe")

### Success Metrics

**Understanding:**
- âœ… Users can explain what DSPy does in their own words
- âœ… Users understand the role of scoring functions
- âœ… Users see the value of testing multiple approaches

**Engagement:**
- âœ… Users try multiple inputs
- âœ… Users explore recipe details
- âœ… Users compare chef performances

**Emotional:**
- âœ… Users smile/laugh at the metaphor
- âœ… Users feel excited to try their own tasks
- âœ… Users share with colleagues ("Check this out!")

## Technical Details

### Component Structure
```
PromptKitchen
â”œâ”€â”€ Header (Kitchen name + story toggle)
â”œâ”€â”€ Story Explainer (collapsible 3-step)
â”œâ”€â”€ Grid Layout
â”‚   â”œâ”€â”€ Left Panel (Your Order)
â”‚   â”‚   â”œâ”€â”€ Order Input
â”‚   â”‚   â”œâ”€â”€ Send/Cook Button
â”‚   â”‚   â”œâ”€â”€ Popular Orders
â”‚   â”‚   â””â”€â”€ Judge Criteria Info
â”‚   â””â”€â”€ Right Panel (Chefs at Work)
â”‚       â”œâ”€â”€ Winner Banner (if complete)
â”‚       â””â”€â”€ Chef Cards
â”‚           â””â”€â”€ ChefCard (x3)
â”‚               â”œâ”€â”€ Chef Header
â”‚               â”œâ”€â”€ Recipe (collapsible)
â”‚               â”œâ”€â”€ Finished Dish
â”‚               â””â”€â”€ Judge's Scorecard
```

### Props Interface
```tsx
interface PromptKitchenProps {
  onRun: (input: string) => Promise<void>;
  variants: Variant[];
  isRunning: boolean;
  winner?: string;
}
```

### Data Flow
```
User enters order
     â†“
Click "Send to Kitchen!"
     â†“
useSimpleDSPyDemo hook
     â†“
POST /api/run
     â†“
SSE stream events
     â†“
Variants update (chefs cook)
     â†“
Scores appear (judges score)
     â†“
Winner announced (golden spoon)
```

## Conclusion

**The Prompt Kitchen transforms technical complexity into narrative simplicity.**

Instead of learning about:
- "Multi-variant prompt optimization"
- "Deterministic scoring functions"
- "Argmax selection algorithms"

Users experience:
- "Chefs compete to cook your order"
- "Judges score based on clear criteria"
- "Winner gets the golden spoon!"

**Same functionality. Better story. Deeper understanding.**

---

ğŸ³ **Ready to cook?** Refresh your browser and watch the chefs compete!
